#!/bin/bash

INTEGRADO=LVDS
EXTERNO=DisplayPort-0

getRes() {
    xrandr -q | grep -A 1 $1 | awk 'FNR == 2 {print $1}'
}


# set up the two monitors for bspwm
external_monitor=$(xrandr --query | grep $EXTERNO)
if [[ ! $external_monitor = *disconnected* ]]; then
    echo "Monitor conectado"
    bspc monitor LVDS-1-2 -r
    xrandr --output $INTEGRADO \
        --primary \
        --mode $(getRes $INTEGRADO) \
        --rotate normal \
        --output $EXTERNO \
        --mode $(getRes $EXTERNO) \
        --rotate normal \
        --above $INTEGRADO

    bspc config top_padding 0
else
    echo "Monitor desconectado"
    bspc monitor LVDS-1-2 -r
    bspc monitor $EXTERNO -r
    bspc wm -o
    xrandr --output $INTEGRADO \
        --primary \
        --mode $(getRes $INTEGRADO) \
        --rotate normal \
        --output $EXTERNO --off
fi

